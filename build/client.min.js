(function(e,t,n){function r(n,s){if(!t[n]){if(!e[n]){var o=typeof require=="function"&&require;if(!s&&o)return o(n,!0);if(i)return i(n,!0);throw new Error("Cannot find module '"+n+"'")}var u=t[n]={exports:{}};e[n][0].call(u.exports,function(t){var i=e[n][1][t];return r(i?i:t)},u,u.exports)}return t[n].exports}var i=typeof require=="function"&&require;for(var s=0;s<n.length;s++)r(n[s]);return r})({1:[function(e,t,n){var r=t.exports.exists=function f(e,t){typeof t=="string"&&(t=t.split("."));if(t instanceof Array&&t.length!==0){t=t.slice();var n=t.shift();return typeof e!="object"||e===null?!1:t.length===0?Object.hasOwnProperty.apply(e,[n]):f(e[n],t)}return!1},i=t.exports.get=function l(e,t){typeof t=="string"&&(t=t.split("."));if(!(t instanceof Array&&t.length!==0))return;t=t.slice();var n=t.shift();if(typeof e!="object"||e===null)return;if(t.length===0)return e[n];if(t.length)return l(e[n],t)},s=t.exports.search=function c(e,t){typeof t=="string"&&(t=t.split("."));if(t instanceof Array&&t.length!==0){t=t.slice();var n=t.shift();if(typeof e!="object"||e===null)return;return n==="*"&&(n=".*"),typeof n=="string"&&(n=new RegExp(n)),t.length===0?Object.keys(e).filter(n.test.bind(n)).map(function(t){return e[t]}):Array.prototype.concat.apply([],Object.keys(e).filter(n.test.bind(n)).map(function(n){return c(e[n],t)}))}return},o=t.exports.put=function h(e,t,n){typeof t=="string"&&(t=t.split("."));if(!(t instanceof Array&&t.length!==0))return!1;t=t.slice();var r=t.shift();if(typeof e!="object"||e===null)return!1;if(t.length!==0)return typeof e[r]=="undefined"&&(e[r]={}),typeof e[r]!="object"||e[r]===null?!1:h(e[r],t,n);e[r]=n},u=t.exports.remove=function p(e,t,n){typeof t=="string"&&(t=t.split("."));if(t instanceof Array&&t.length!==0){t=t.slice();var r=t.shift();return typeof e!="object"||e===null?!1:t.length===0?Object.hasOwnProperty.call(e,r)?(delete e[r],!0):!1:p(e[r],t,n)}return!1},a=t.exports.deepKeys=function d(e,t){typeof t=="undefined"&&(t=[]);var n=[];for(var r in e){if(!Object.hasOwnProperty.call(e,r))continue;n.push(t.concat([r])),typeof e[r]=="object"&&e[r]!==null&&(n=n.concat(d(e[r],t.concat([r]))))}return n}},{}],2:[function(e,t,n){var r=e("./proto");t.exports=function(e,t){return r.factory(e,t)},t.exports.proto=r,t.exports.augment_prototype=function(e){for(var t in e)r.prototype[t]=e[t]}},{"./proto":3}],3:[function(e,t,n){function u(){}function a(){var e=[];if(typeof arguments[0]=="string"){var t=arguments[1]||{},n=t._digger||{};n.tag=arguments[0],t._digger=n,e=[t]}else Object.prototype.toString.call(arguments[0])=="[object Array]"?e=arguments[0]:typeof arguments[0]=="object"&&(e=[arguments[0]]);if(e[0]===undefined||e[0]===null)e=[];var r=function(){if(!r.select)throw new Error("there is no select method attached to this container");var t=[arguments[0]];return arguments.length>1&&t.push(arguments[1]),r.select.apply(r,t)};return r.__proto__=new u,r.build(e),r}function f(e,t){return t?i.get(e,t):e}function l(e,t,n){return n?(i.put(e,n,t),t):t}function c(e,t){var n=[e];return t&&n.unshift(t),n.join(".")}function h(e){return function(t,n){var r=this;if(arguments.length<=0)return r.isEmpty()?null:f(r.get(0),e);if(arguments.length===1&&typeof t=="string")return r.isEmpty()?null:f(r.get(0),c(t,e));if(arguments.length===1)return r.models.forEach(function(t){l(t,n,e)}),r;if(arguments.length>1){var i=c(t,e);return r.models.forEach(function(e){l(e,n,i)}),r}}}function p(e,t){return function(n){var r=this;if(arguments.length<=0){if(r.isEmpty())return null;var s=i.get(r.get(0),e);return s[t]}return r.isEmpty()||r.models.forEach(function(r){var s=i.get(r,e);s[t]=n}),r}}function d(e){return function(t){var n=this,r=c(t,e);return n.models.forEach(function(e){i.remove(e,r)}),n}}var r=e("events").EventEmitter,i=e("dotty"),s=e("util"),o=e("digger-utils");u.factory=a,s.inherits(u,r),t.exports=u,u.prototype.build=function(e){this.models=e||[];for(var t in e){var n=e[t];n._digger||(n._digger={}),n._digger.diggerid||(n._digger.diggerid=o.diggerid())}return this},u.prototype.toJSON=function(){return this.models},u.prototype.spawn=function(e){e=e||[];var t=u.factory(e);return this.supplychain&&(t.supplychain=this.supplychain),t},u.prototype.clone=function(){var e=JSON.parse(JSON.stringify(this.models)),t=this.spawn(e);return t.recurse(function(e){var t=e.get(0),n=t._digger||{};n.diggerid=o.diggerid(),t._digger=n}),t.ensure_parent_ids(),t},u.prototype.ensure_parent_ids=function(e){var t=this;e&&this.each(function(t){t.diggerparentid(e.diggerid())}),this.children().each(function(e){e.ensure_parent_ids(t)})},u.prototype.children=function(){var e=[],t=this;return this.each(function(t){e=e.concat(t.get(0)._children||[])}),this.spawn(e)},u.prototype.recurse=function(e){return this.descendents().each(e),this},u.prototype.descendents=function(){function t(n){e=e.concat(n.models),n.children().each(t)}var e=[];return t(this),this.spawn(e)},u.prototype.containers=function(){var e=this;return this.models.map(function(t){return e.spawn([t])})},u.prototype.skeleton=function(){return this.models.map(function(e){return e._digger||{}})},u.prototype.add=function(e){var t=this;return e?(Object.prototype.toString.call(e)=="[object Array]"?e.forEach(function(e){t.add(e)}):this.models=this.models.concat(e.models),this):this},u.prototype.each=function(e){return this.containers().forEach(e),this},u.prototype.map=function(e){return this.containers().map(e)},u.prototype.count=function(){return this.models.length},u.prototype.first=function(){return this.eq(0)},u.prototype.last=function(){return this.eq(this.count()-1)},u.prototype.eq=function(e){return this.spawn(this.get(e))},u.prototype.get=function(e){return this.models[e]},u.prototype.attr=h(),u.prototype.digger=h("_digger"),u.prototype.data=h("_digger.data"),u.prototype.diggerid=p("_digger","diggerid"),u.prototype.diggerparentid=p("_digger","diggerparentid"),u.prototype.diggerwarehouse=p("_digger","diggerwarehouse"),u.prototype.id=p("_digger","id"),u.prototype.tag=p("_digger","tag"),u.prototype.classnames=p("_digger","class"),u.prototype.removeAttr=d(),u.prototype.removeDigger=d("_digger"),u.prototype.removeData=d("_digger.data"),u.prototype.is=function(e){return this.tag()==e},u.prototype.addClass=function(e){var t=this;return this.models.forEach(function(t){var n=t._digger.class||[],r=!1;n.forEach(function(t){t==e&&(r=!0)}),r||n.push(e),t._digger.class=n}),this},u.prototype.removeClass=function(e){var t=this;return this.models.forEach(function(t){var n=t._digger.class||[],r=[];n.forEach(function(t){t!=e&&r.push(t)}),t._digger.class=r}),this},u.prototype.hasClass=function(e){var t=!1;return(this.classnames()||[]).forEach(function(n){n==e&&(t=!0)}),t},u.prototype.hasAttr=function(e){var t=this.attr(e);return t!==null},u.prototype.isEmpty=function(){return this.count()===0},u.prototype.inject_data=function(e){return this.models.forEach(function(t){o.extend(t,e)}),this},u.prototype.diggerurl=function(){var e=this.diggerwarehouse(),t=this.diggerid(),n=e;return t&&this.tag()!="_supplychain"&&(e!="/"&&(n+="/"),n+=t),n},u.prototype.title=function(){var e=this.attr("name");return e||(e=this.attr("title")),e||(e=this.tag()),e},u.prototype.summary=function(e){e=e||{};var t=[],n=this.attr("name")||this.attr("title")||"";n.length>0&&e.title!==!1&&t.push(n+": "),t.push(this.tag());var r=this.id()||"";r.length>0&&t.push("#"+r);var i=this.classnames()||[];return i.length>0&&i.forEach(function(e){e.match(/\w/)&&t.push("."+e.replace(/^\s+/,"").replace(/\s+$/,""))}),t.join("")},u.prototype.toString=function(){return this.summary()}},{"digger-utils":13,dotty:1,events:15,util:16}],4:[function(e,t,n){function i(e,t){if(this.count()<=0)throw new Error("attempting a select on an empty container");var n=[e];arguments.length>1&&n.push(t);var i=n.map(function(e){return r(e)}),s=this.containers(),o={};this.each(function(e){var t=e.diggerwarehouse()||"/",n=o[t]||[];n.push(e),o[t]=n});var u=Object.keys(o),a={method:"post",url:"/reception",body:u.map(function(e){var t=o[e].map(function(e){return e.get(0)._digger}).filter(function(e){return e.tag!="_supplychain"});return{method:"post",url:(e+"/resolve").replace(/\/\//g,"/"),body:{selectors:i,skeleton:t}}})};return this.supplychain?this.supplychain.contract(a,function(e){return self.spawn(e)}):a}function s(e){var t=this;if(arguments.length<=0||e.count()<=0)throw new Error("there is nothing to append");if(this.count()<=0)throw new Error("there is nothing to append to");var n=e.models,r=this.eq(0),i=this.get(0);i._children=(i._children||[]).concat(n);var s={method:"post",url:r.diggerurl(),body:n};return this.supplychain?this.supplychain.contract(s,function(e){var r={};return n.forEach(function(e){r[e._digger.diggerid]=e}),e.forEach(function(e){var t=r[e._digger.diggerid];if(t)for(var n in e)t[n]=e[n]}),t.spawn(e)}):s}function o(){if(this.count()<=0)throw new Error("there is nothing to save");var e={method:"post",url:"/reception",body:this.map(function(e){var t=e.get(0),n=JSON.parse(JSON.stringify(t));return delete n._children,delete n._digger.data,{method:"put",url:e.diggerurl(),body:n}})};return this.supplychain?this.supplychain.contract(e):e}function u(){if(this.count()<=0)throw new Error("there is nothing to delete");var e={method:"post",url:"/reception",body:this.map(function(e){return{method:"delete",url:e.diggerurl()}})};return this.supplychain?this.supplychain.contract(e):e}var r=e("digger-selector");t.exports={select:i,append:s,save:o,remove:u}},{"digger-selector":8}],5:[function(e,t,n){function r(e){this.count=e.length,this.index=0,this.finished=!1}function i(e){return function(t,n){var i=new r(t),s=n.spawn();return t.reverse().forEach(function(t){i.next();var o=n.spawn();t.phases.forEach(function(t){var i=n,s=new r(t),u=!1;t.forEach(function(t){if(u)return;s.next();var n=e(t,i);return n.count()<=0?(u=!0,!1):(s.finished?o.add(n):i=n,!0)})});if(o.count()<=0)return!1;i.finished?s=o:n=o}),s}}t.exports=i,r.prototype.next=function(){this.index++,this.index>=this.count&&(this.finished=!0)}},{}],6:[function(e,t,n){var r=e("./find"),i=e("./search"),s=e("digger-selector"),o=r(i.searcher),u={title:function(e,t){return e.title().toLowerCase()<t.title().toLowerCase()?-1:e.title().toLowerCase()>t.title().toLowerCase()?1:0},field:function(e){return function(t,n){return t.attr(e).toLowerCase()<n.attr(e).toLowerCase()?-1:t.attr(e).toLowerCase()>n.attr(e).toLowerCase()?1:0}}};t.exports={find:function(e,t){var n=[e];return t&&n.push(t),n=n.map(function(e){return s(e)}),o(n,this)},sort:function(e){return typeof e=="string"?e=u.field(e):e||(e=u.title),this.each(function(t){var n=t.children().containers().sort(e),r=t.get(0);r.children=n.map(function(e){return e.get(0)})}),this},filter:function(e){!typeof e=="function"&&(typeof e=="string"&&(e=s(e).phases[0][0]),e=i.compiler(e));var t=this.containers().filter(e);return this.spawn(t.map(function(e){return e.get(0)}))},match:function(e){if(this.count()<=0)return!1;var t=this.filter(e);return t.count()>0}}},{"./find":5,"./search":7,"digger-selector":8}],7:[function(e,t,n){function s(e){return function(t){var n=t.get(0),r=n._digger;if(e.tag=="*")return!0;if(e.id&&r.id!=e.id)return!1;if(e.diggerid&&r.diggerid!=e.diggerid)return!1;if(e.tag&&r.tag!=e.tag)return!1;if(e.class){var s=Object.keys(e.class||{}),o=0;s.forEach(function(e){o+=t.hasClass(e)?1:0});if(o<s.length)return!1}if(e.attr){var u=0;e.attr.forEach(function(e){var n=t.attr(e.field),r=i[e.operator];e.value?r&&(u+=r.apply(null,[n,e.value])?1:0):u+=n!==null?1:0});if(u<e.attr.length)return!1}return!0}}function o(e,t){var n=s(e),r=t;if(e.splitter==">")r=t.children();else{if(e.splitter=="<")throw new Error("we do not support the parent splitter at the moment");r=t.descendents()}var i=r.filter(n),o=e.modifier||{};if(o.limit){var u=""+o.limit;if(u.indexOf(",")>=0){var a=u.split(",").map(function(e){return e.replace(/\D/g,"")});i.models=i.models.slice(a[0],a[1])}else i.models=i.models.slice(0,o.limit)}return o.first&&i.models.length>0?i.models=[i.models[0]]:o.last&&i.models.length>0&&(i.models=[i.models[i.models.length-1]]),i}var r=e("digger-utils");t.exports.searcher=o,t.exports.compiler=s;var i={"=":function(e,t){return e!=null&&e==t},"!=":function(e,t){return e!=null&&e!=t},">":function(e,t){return t=parseFloat(t),e!=null&&!isNaN(t)?e>t:!1},">=":function(e,t){return t=parseFloat(t),e!=null&&!isNaN(t)?e>=t:!1},"<":function(e,t){return t=parseFloat(t),e!=null&&!isNaN(t)?e<t:!1},"<=":function(e,t){return t=parseFloat(t),e!=null&&!isNaN(t)?e<=t:!1},"^=":function(e,t){return e!=null&&e.match(new RegExp("^"+r.escapeRegexp(t),"i"))!==null},"$=":function(e,t){return e!=null&&e.match(new RegExp(r.escapeRegexp(t)+"$","i"))!==null},"~=":function(e,t){return e!=null&&e.match(new RegExp("\\W"+r.escapeRegexp(t)+"\\W","i"))!==null},"|=":function(e,t){return e!=null&&e.match(new RegExp("^"+r.escapeRegexp(t)+"-","i"))!==null},"*=":function(e,t){return e!=null&&e.match(new RegExp(r.escapeRegexp(t),"i"))!==null}}},{"digger-utils":13}],8:[function(e,t,n){function i(e){var t=null,n=e?e:"",i="",s=[],o=function(){t=null;for(var e in r){var i=r[e];if(t=n.match(i.regexp)){var o={value:t[0]};for(prop in i)o[prop]=i[prop];return s.push(o),n=n.replace(t[0],""),!0}}return!1};while(o())if(i==n)break;return s}function s(){return{"class":{},attr:[],modifier:{}}}function o(e){if(typeof e!="string")return e;var t=i(e),n=[],r=[],o=s(),u=function(){r.length>0&&n.push(r),r=[]},a=function(){Object.keys(o).length>0&&r.push(o),o=s()},f=function(e,t){e.mapper.apply(null,[e.value,t])};return t.forEach(function(e,t){e.name=="splitter"&&e.value.match(/,/)?(a(),u()):(e.name=="splitter"&&t>0&&a(),f(e,o))}),a(),u(),{string:e,phases:n}}t.exports=o;var r=[{name:"tag",regexp:/^(\*|\w+)/,mapper:function(e,t){t.tag=e}},{name:"class",regexp:/^\.\w+/,mapper:function(e,t){t.class=t.class||{},t.class[e.replace(/^\./,"")]=!0}},{name:"id",regexp:/^#\w+/,mapper:function(e,t){t.id=e.replace(/^#/,"")}},{name:"diggerid",regexp:/^=[\w-]+/,mapper:function(e,t){t.diggerid=e.replace(/^=/,"")}},{name:"modifier",regexp:/^:\w+(\(.*?\))?/,mapper:function(e,t){t.modifier=t.modifier||{};var n=e.split("("),r=n[0];e=n[1],e?(e=e.replace(/\)$/,""),e.match(/^[\d\.-]+$/)&&(e=JSON.parse(e))):e=!0,t.modifier[r.replace(/^:/,"")]=e}},{name:"attr",regexp:/^\[.*?["']?.*?["']?\]/,mapper:function(e,t){t.attr=t.attr||[];var n=e.match(/\[(.*?)([=><\^\|\*\~\$\!]+)["']?(.*?)["']?\]/);n?t.attr.push({field:n[1],operator:n[2],value:n[3]}):t.attr.push({field:e.replace(/^\[/,"").replace(/\]$/,"")})}},{name:"splitter",regexp:/^[ ,<>]+/,mapper:function(e,t){t.splitter=e.replace(/\s+/g,"")}}]},{}],9:[function(e,t,n){(function(e){(function(e){if(typeof bootstrap=="function")bootstrap("promise",e);else if(typeof n=="object")t.exports=e();else if(typeof define=="function"&&define.amd)define(e);else if(typeof ses!="undefined"){if(!ses.ok())return;ses.makeQ=e}else Q=e()})(function(){"use strict";function u(e){var t=Function.call;return function(){return t.apply(e,arguments)}}function m(e){return e===Object(e)}function g(e){return v(e)==="[object StopIteration]"||e instanceof y}function E(e,n){if(t&&n.stack&&typeof e=="object"&&e!==null&&e.stack&&e.stack.indexOf(w)===-1){var r=[];for(var i=n;!!i;i=i.source)i.stack&&r.unshift(i.stack);r.unshift(e.stack);var s=r.join("\n"+w+"\n");e.stack=S(s)}}function S(e){var t=e.split("\n"),n=[];for(var r=0;r<t.length;++r){var i=t[r];!N(i)&&!x(i)&&i&&n.push(i)}return n.join("\n")}function x(e){return e.indexOf("(module.js:")!==-1||e.indexOf("(node.js:")!==-1}function T(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(e);if(r)return[r[1],Number(r[2])]}function N(e){var t=T(e);if(!t)return!1;var n=t[0],s=t[1];return n===i&&s>=r&&s<=kt}function C(){if(!t)return;try{throw new Error}catch(e){var n=e.stack.split("\n"),r=n[0].indexOf("@")>0?n[1]:n[2],s=T(r);if(!s)return;return i=s[0],s[1]}}function k(e,t,n){return function(){return typeof console!="undefined"&&typeof console.warn=="function"&&console.warn(t+" is deprecated, use "+n+" instead.",(new Error("")).stack),e.apply(e,arguments)}}function L(e){return K(e)}function A(){function l(t){r=t,s.source=t,f(e,function(e,n){o(function(){t.promiseDispatch.apply(t,n)})},void 0),e=void 0,n=void 0}var e=[],n=[],r,i=h(A.prototype),s=h(M.prototype);s.promiseDispatch=function(t,i,s){var u=a(arguments);e?(e.push(u),i==="when"&&s[1]&&n.push(s[1])):o(function(){r.promiseDispatch.apply(r,u)})},s.valueOf=k(function(){if(e)return s;var t=_(r);return D(t)&&(r=t),t},"valueOf","inspect"),s.inspect=function(){return r?r.inspect():{state:"pending"}};if(L.longStackSupport&&t)try{throw new Error}catch(u){s.stack=u.stack.substring(u.stack.indexOf("\n")+1)}return i.promise=s,i.resolve=function(e){if(r)return;l(K(e))},i.fulfill=function(e){if(r)return;l(J(e))},i.reject=function(e){if(r)return;l($(e))},i.notify=function(e){if(r)return;f(n,function(t,n){o(function(){n(e)})},void 0)},i}function O(e){if(typeof e!="function")throw new TypeError("resolver must be a function.");var t=A();return ft(e,t.resolve,t.reject,t.notify).fail(t.reject),t.promise}function M(e,t,n){t===void 0&&(t=function(e){return $(new Error("Promise does not support operation: "+e))}),n===void 0&&(n=function(){return{state:"unknown"}});var r=h(M.prototype);r.promiseDispatch=function(n,i,s){var o;try{e[i]?o=e[i].apply(r,s):o=t.call(r,i,s)}catch(u){o=$(u)}n&&n(o)},r.inspect=n;if(n){var i=n();i.state==="rejected"&&(r.exception=i.reason),r.valueOf=k(function(){var e=n();return e.state==="pending"||e.state==="rejected"?r:e.value})}return r}function _(e){if(D(e)){var t=e.inspect();if(t.state==="fulfilled")return t.value}return e}function D(e){return m(e)&&typeof e.promiseDispatch=="function"&&typeof e.inspect=="function"}function P(e){return m(e)&&typeof e.then=="function"}function H(e){return D(e)&&e.inspect().state==="pending"}function B(e){return!D(e)||e.inspect().state==="fulfilled"}function j(e){return D(e)&&e.inspect().state==="rejected"}function U(){!q&&typeof window!="undefined"&&!window.Touch&&window.console&&console.warn("[Q] Unhandled rejection reasons (should be empty):",F),q=!0}function z(){for(var e=0;e<F.length;e++){var t=F[e];t&&typeof t.stack!="undefined"?console.warn("Unhandled rejection reason:",t.stack):console.warn("Unhandled rejection reason (no stack):",t)}}function W(){F.length=0,I.length=0,q=!1,R||(R=!0,typeof e!="undefined"&&e.on&&e.on("exit",z))}function X(e,t){if(!R)return;I.push(e),F.push(t),U()}function V(e){if(!R)return;var t=l(I,e);t!==-1&&(I.splice(t,1),F.splice(t,1))}function $(e){var t=M({when:function(t){return t&&V(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return X(t,e),t}function J(e){return M({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},"delete":function(t){delete e[t]},post:function(t,n){return t===null||t===void 0?e.apply(void 0,n):e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},keys:function(){return d(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function K(e){return D(e)?e:P(e)?Q(e):J(e)}function Q(e){var t=A();return o(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}}),t.promise}function G(e){return M({isDef:function(){}},function(n,r){return it(e,n,r)},function(){return K(e).inspect()})}function Y(e,t,n,r){return L(e).then(t,n,r)}function Z(e,t,n){return Y(e,function(e){return ct(e).then(function(e){return t.apply(void 0,e)},n)},n)}function et(e){return function(){function t(e,t){var s;if(b){try{s=n[e](t)}catch(o){return $(o)}return s.done?s.value:Y(s.value,r,i)}try{s=n[e](t)}catch(o){return g(o)?o.value:$(o)}return Y(s,r,i)}var n=e.apply(this,arguments),r=t.bind(t,"send"),i=t.bind(t,"throw");return r()}}function tt(e){L.done(L.async(e)())}function nt(e){throw new y(e)}function rt(e){return function(){return Z([this,ct(arguments)],function(t,n){return e.apply(t,n)})}}function it(e,t,n){var r=A();return o(function(){K(e).promiseDispatch(r.resolve,t,n)}),r.promise}function st(e){return function(t){var n=a(arguments,1);return it(t,e,n)}}function ut(e,t){var n=a(arguments,2);return ot(e,t,n)}function at(e,t){return it(e,"apply",[void 0,t])}function ft(e){var t=a(arguments,1);return at(e,t)}function lt(e){var t=a(arguments,1);return function(){var r=t.concat(a(arguments));return it(e,"apply",[this,r])}}function ct(e){return Y(e,function(e){var t=0,n=A();return f(e,function(r,i,s){var o;D(i)&&(o=i.inspect()).state==="fulfilled"?e[s]=o.value:(++t,Y(i,function(r){e[s]=r,--t===0&&n.resolve(e)},n.reject))},void 0),t===0&&n.resolve(e),n.promise})}function ht(e){return Y(e,function(e){return e=c(e,K),Y(ct(c(e,function(e){return Y(e,s,s)})),function(){return e})})}function pt(e){return Y(e,function(e){return ct(c(e,function(t,n){return Y(t,function(t){return e[n]={state:"fulfilled",value:t},e[n]},function(t){return e[n]={state:"rejected",reason:t},e[n]})})).thenResolve(e)})}function dt(e,t){return Y(e,void 0,t)}function vt(e,t){return Y(e,void 0,void 0,t)}function mt(e,t){return Y(e,function(e){return Y(t(),function(){return e})},function(e){return Y(t(),function(){return $(e)})})}function gt(t,n,r,i){var s=function(e){o(function(){E(e,t);if(!L.onerror)throw e;L.onerror(e)})},u=n||r||i?Y(t,n,r,i):t;typeof e=="object"&&e&&e.domain&&(s=e.domain.bind(s)),dt(u,s)}function yt(e,t,n){var r=A(),i=setTimeout(function(){r.reject(new Error(n||"Timed out after "+t+" ms"))},t);return Y(e,function(e){clearTimeout(i),r.resolve(e)},function(e){clearTimeout(i),r.reject(e)},r.notify),r.promise}function bt(e,t){t===void 0&&(t=e,e=void 0);var n=A();return Y(e,undefined,undefined,n.notify),setTimeout(function(){n.resolve(e)},t),n.promise}function wt(e,t){var n=a(t),r=A();return n.push(r.makeNodeResolver()),at(e,n).fail(r.reject),r.promise}function Et(e){var t=a(arguments,1),n=A();return t.push(n.makeNodeResolver()),at(e,t).fail(n.reject),n.promise}function St(e){var t=a(arguments,1);return function(){var n=t.concat(a(arguments)),r=A();return n.push(r.makeNodeResolver()),at(e,n).fail(r.reject),r.promise}}function xt(e,t){var n=a(arguments,2);return function(){function s(){return e.apply(t,arguments)}var r=n.concat(a(arguments)),i=A();return r.push(i.makeNodeResolver()),at(s,r).fail(i.reject),i.promise}}function Tt(e,t,n){var r=a(n||[]),i=A();return r.push(i.makeNodeResolver()),ot(e,t,r).fail(i.reject),i.promise}function Nt(e,t){var n=a(arguments,2),r=A();return n.push(r.makeNodeResolver()),ot(e,t,n).fail(r.reject),r.promise}function Ct(e,t){if(!t)return e;e.then(function(e){o(function(){t(null,e)})},function(e){o(function(){t(e)})})}var t=!1;try{throw new Error}catch(n){t=!!n.stack}var r=C(),i,s=function(){},o=function(){function u(){while(t.next){t=t.next;var e=t.task;t.task=void 0;var n=t.domain;n&&(t.domain=void 0,n.enter());try{e()}catch(i){if(s)throw n&&n.exit(),setTimeout(u,0),n&&n.enter(),i;setTimeout(function(){throw i},0)}n&&n.exit()}r=!1}var t={task:void 0,next:null},n=t,r=!1,i=void 0,s=!1;o=function(t){n=n.next={task:t,domain:s&&e.domain,next:null},r||(r=!0,i())};if(typeof e!="undefined"&&e.nextTick)s=!0,i=function(){e.nextTick(u)};else if(typeof setImmediate=="function")typeof window!="undefined"?i=setImmediate.bind(window,u):i=function(){setImmediate(u)};else if(typeof MessageChannel!="undefined"){var a=new MessageChannel;a.port1.onmessage=u,i=function(){a.port2.postMessage(0)}}else i=function(){setTimeout(u,0)};return o}(),a=u(Array.prototype.slice),f=u(Array.prototype.reduce||function(e,t){var n=0,r=this.length;if(arguments.length===1)do{if(n in this){t=this[n++];break}if(++n>=r)throw new TypeError}while(1);for(;n<r;n++)n in this&&(t=e(t,this[n],n));return t}),l=u(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),c=u(Array.prototype.map||function(e,t){var n=this,r=[];return f(n,function(i,s,o){r.push(e.call(t,s,o,n))},void 0),r}),h=Object.create||function(e){function t(){}return t.prototype=e,new t},p=u(Object.prototype.hasOwnProperty),d=Object.keys||function(e){var t=[];for(var n in e)p(e,n)&&t.push(n);return t},v=u(Object.prototype.toString),y;typeof ReturnValue!="undefined"?y=ReturnValue:y=function(e){this.value=e};var b;try{new Function("(function* (){ yield 1; })"),b=!0}catch(n){b=!1}var w="From previous event:";L.nextTick=o,L.longStackSupport=!1,L.defer=A,A.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(a(arguments,1)):e.resolve(n)}},L.promise=O,L.makePromise=M,M.prototype.then=function(e,t,n){function u(t){try{return typeof e=="function"?e(t):t}catch(n){return $(n)}}function a(e){if(typeof t=="function"){E(e,r);try{return t(e)}catch(n){return $(n)}}return $(e)}function f(e){return typeof n=="function"?n(e):e}var r=this,i=A(),s=!1;return o(function(){r.promiseDispatch(function(e){if(s)return;s=!0,i.resolve(u(e))},"when",[function(e){if(s)return;s=!0,i.resolve(a(e))}])}),r.promiseDispatch(void 0,"when",[void 0,function(e){var t,n=!1;try{t=f(e)}catch(r){n=!0;if(!L.onerror)throw r;L.onerror(r)}n||i.notify(t)}]),i.promise},M.prototype.thenResolve=function(e){return Y(this,function(){return e})},M.prototype.thenReject=function(e){return Y(this,function(){throw e})},f(["isFulfilled","isRejected","isPending","dispatch","when","spread","get","set","del","delete","post","send","mapply","invoke","mcall","keys","fapply","fcall","fbind","all","allResolved","timeout","delay","catch","finally","fail","fin","progress","done","nfcall","nfapply","nfbind","denodeify","nbind","npost","nsend","nmapply","ninvoke","nmcall","nodeify"],function(e,t){M.prototype[t]=function(){return L[t].apply(L,[this].concat(a(arguments)))}},void 0),M.prototype.toSource=function(){return this.toString()},M.prototype.toString=function(){return"[object Promise]"},L.nearer=_,L.isPromise=D,L.isPromiseAlike=P,L.isPending=H,L.isFulfilled=B,L.isRejected=j;var F=[],I=[],q=!1,R=!0;L.resetUnhandledRejections=W,L.getUnhandledReasons=function(){return F.slice()},L.stopUnhandledRejectionTracking=function(){W(),typeof e!="undefined"&&e.on&&e.removeListener("exit",z),R=!1},W(),L.reject=$,L.fulfill=J,L.resolve=K,L.master=G,L.when=Y,L.spread=Z,L.async=et,L.spawn=tt,L["return"]=nt,L.promised=rt,L.dispatch=it,L.dispatcher=st,L.get=st("get"),L.set=st("set"),L["delete"]=L.del=st("delete");var ot=L.post=st("post");L.mapply=ot,L.send=ut,L.invoke=ut,L.mcall=ut,L.fapply=at,L["try"]=ft,L.fcall=ft,L.fbind=lt,L.keys=st("keys"),L.all=ct,L.allResolved=k(ht,"allResolved","allSettled"),L.allSettled=pt,L["catch"]=L.fail=dt,L.progress=vt,L["finally"]=L.fin=mt,L.done=gt,L.timeout=yt,L.delay=bt,L.nfapply=wt,L.nfcall=Et,L.nfbind=St,L.denodeify=L.nfbind,L.nbind=xt,L.npost=Tt,L.nmapply=Tt,L.nsend=Nt,L.ninvoke=L.nsend,L.nmcall=L.nsend,L.nodeify=Ct;var kt=C();return L})})(e("__browserify_process"))},{__browserify_process:17}],10:[function(e,t,n){function u(e){var t=new a(e);return t}function a(e){this.handle=e}var r=e("digger-container"),i=e("q"),s=e("events").EventEmitter,o=e("util");t.exports=u,o.inherits(a,s),a.prototype.contract=function(e){var t=this,n=i.defer();!t.handle||typeof t.handle!="function"?setTimeout(function(){n.reject("There is no handle method attached to this supplychain")},0):t.handle(e,function(e,t){e?n.reject(e):n.resolve(t)});var r=n.promise;return r.contract=e,r.ship=function(e){return r.then(e)},r},a.prototype.connect=function(e,t){var n=r(arguments.length>1?"item":"_supplychain");return n.diggerwarehouse(e||"/"),arguments.length>1&&n.diggerid(t),n.supplychain=this,n}},{"digger-container":2,events:15,q:9,util:16}],11:[function(e,t,n){function i(e){if(!e||toString.call(e)!=="[object Object]"||e.nodeType||e.setInterval)return!1;var t=hasOwnProperty.call(e,"constructor"),n=hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!t&&!n)return!1;var i;for(i in e);return i===undefined||r.call(e,i)}var r=Object.prototype.hasOwnProperty;t.exports=function s(){var e,t,n,r,o,u,a=arguments[0]||{},f=1,l=arguments.length,c=!1;typeof a=="boolean"&&(c=a,a=arguments[1]||{},f=2),typeof a!="object"&&typeof a!="function"&&(a={});for(;f<l;f++)if((e=arguments[f])!=null)for(t in e){n=a[t],r=e[t];if(a===r)continue;c&&r&&(i(r)||(o=Array.isArray(r)))?(o?(o=!1,u=n&&Array.isArray(n)?n:[]):u=n&&i(n)?n:{},a[t]=s(c,u,r)):r!==undefined&&(a[t]=r)}return a}},{}],12:[function(e,t,n){var r=t.exports=function(e,t){t||(t=16),e===undefined&&(e=128);if(e<=0)return"0";var n=Math.log(Math.pow(2,e))/Math.log(t);for(var i=2;n===Infinity;i*=2)n=Math.log(Math.pow(2,e/i))/Math.log(t)*i;var s=n-Math.floor(n),o="";for(var i=0;i<Math.floor(n);i++){var u=Math.floor(Math.random()*t).toString(t);o=u+o}if(s){var a=Math.pow(t,s),u=Math.floor(Math.random()*a).toString(t);o=u+o}var f=parseInt(o,t);return f!==Infinity&&f>=Math.pow(2,e)?r(e,t):o};r.rack=function(e,t,n){var i=function(i){var o=0;do{if(o++>10){if(!n)throw new Error("too many ID collisions, use more bits");e+=n}var u=r(e,t)}while(Object.hasOwnProperty.call(s,u));return s[u]=i,u},s=i.hats={};return i.get=function(e){return i.hats[e]},i.set=function(e,t){return i.hats[e]=t,i},i.bits=e||128,i.base=t||16,i}},{}],13:[function(e,t,n){(function(){var n=e("extend"),r=e("hat"),i=t.exports={};i.diggerid=function(){return r()},i.littleid=function(e){e=e||6;var t="";for(var n=0;n<e;n++)t+="x";return t.replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)})},i.escapeRegexp=function(e){return e.replace(/([\!\$\(\)\*\+\.\/\:\=\?\[\\\]\^\{\|\}])/g,"\\$1")},i.extend=n})()},{extend:11,hat:12}],14:[function(e,t,n){var r=e("digger-container"),i=e("digger-supplychain");r.augment_prototype(e("digger-find")),r.augment_prototype(e("digger-contracts")),t.exports=function(e){var t=i(e);return t}},{"digger-container":2,"digger-contracts":4,"digger-find":6,"digger-supplychain":10}],15:[function(e,t,n){(function(e){function i(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(t===e[n])return n;return-1}e.EventEmitter||(e.EventEmitter=function(){});var t=n.EventEmitter=e.EventEmitter,r=typeof Array.isArray=="function"?Array.isArray:function(e){return Object.prototype.toString.call(e)==="[object Array]"},s=10;t.prototype.setMaxListeners=function(e){this._events||(this._events={}),this._events.maxListeners=e},t.prototype.emit=function(e){if(e==="error")if(!this._events||!this._events.error||r(this._events.error)&&!this._events.error.length)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var t=this._events[e];if(!t)return!1;if(typeof t=="function"){switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:var n=Array.prototype.slice.call(arguments,1);t.apply(this,n)}return!0}if(r(t)){var n=Array.prototype.slice.call(arguments,1),i=t.slice();for(var s=0,o=i.length;s<o;s++)i[s].apply(this,n);return!0}return!1},t.prototype.addListener=function(e,t){if("function"!=typeof t)throw new Error("addListener only takes instances of Function");this._events||(this._events={}),this.emit("newListener",e,t);if(!this._events[e])this._events[e]=t;else if(r(this._events[e])){if(!this._events[e].warned){var n;this._events.maxListeners!==undefined?n=this._events.maxListeners:n=s,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),console.trace())}this._events[e].push(t)}else this._events[e]=[this._events[e],t];return this},t.prototype.on=t.prototype.addListener,t.prototype.once=function(e,t){var n=this;return n.on(e,function r(){n.removeListener(e,r),t.apply(this,arguments)}),this},t.prototype.removeListener=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[e])return this;var n=this._events[e];if(r(n)){var s=i(n,t);if(s<0)return this;n.splice(s,1),n.length==0&&delete this._events[e]}else this._events[e]===t&&delete this._events[e];return this},t.prototype.removeAllListeners=function(e){return arguments.length===0?(this._events={},this):(e&&this._events&&this._events[e]&&(this._events[e]=null),this)},t.prototype.listeners=function(e){return this._events||(this._events={}),this._events[e]||(this._events[e]=[]),r(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]}})(e("__browserify_process"))},{__browserify_process:17}],16:[function(e,t,n){function i(e){return e instanceof Array||Array.isArray(e)||e&&e!==Object.prototype&&i(e.__proto__)}function s(e){return e instanceof RegExp||typeof 
e=="object"&&Object.prototype.toString.call(e)==="[object RegExp]"}function o(e){if(e instanceof Date)return!0;if(typeof e!="object")return!1;var t=Date.prototype&&c(Date.prototype),n=e.__proto__&&c(e.__proto__);return JSON.stringify(n)===JSON.stringify(t)}function u(e){return e<10?"0"+e.toString(10):e.toString(10)}function f(){var e=new Date,t=[u(e.getHours()),u(e.getMinutes()),u(e.getSeconds())].join(":");return[e.getDate(),a[e.getMonth()],t].join(" ")}var r=e("events");n.isArray=i,n.isDate=function(e){return Object.prototype.toString.call(e)==="[object Date]"},n.isRegExp=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},n.print=function(){},n.puts=function(){},n.debug=function(){},n.inspect=function(e,t,r,u){function h(e,r){if(e&&typeof e.inspect=="function"&&e!==n&&(!e.constructor||e.constructor.prototype!==e))return e.inspect(r);switch(typeof e){case"undefined":return f("undefined","undefined");case"string":var u="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return f(u,"string");case"number":return f(""+e,"number");case"boolean":return f(""+e,"boolean")}if(e===null)return f("null","null");var p=l(e),d=t?c(e):p;if(typeof e=="function"&&d.length===0){if(s(e))return f(""+e,"regexp");var v=e.name?": "+e.name:"";return f("[Function"+v+"]","special")}if(o(e)&&d.length===0)return f(e.toUTCString(),"date");var m,g,y;i(e)?(g="Array",y=["[","]"]):(g="Object",y=["{","}"]);if(typeof e=="function"){var b=e.name?": "+e.name:"";m=s(e)?" "+e:" [Function"+b+"]"}else m="";o(e)&&(m=" "+e.toUTCString());if(d.length===0)return y[0]+m+y[1];if(r<0)return s(e)?f(""+e,"regexp"):f("[Object]","special");a.push(e);var w=d.map(function(t){var n,s;e.__lookupGetter__&&(e.__lookupGetter__(t)?e.__lookupSetter__(t)?s=f("[Getter/Setter]","special"):s=f("[Getter]","special"):e.__lookupSetter__(t)&&(s=f("[Setter]","special"))),p.indexOf(t)<0&&(n="["+t+"]"),s||(a.indexOf(e[t])<0?(r===null?s=h(e[t]):s=h(e[t],r-1),s.indexOf("\n")>-1&&(i(e)?s=s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):s="\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=f("[Circular]","special"));if(typeof n=="undefined"){if(g==="Array"&&t.match(/^\d+$/))return s;n=JSON.stringify(""+t),n.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(n=n.substr(1,n.length-2),n=f(n,"name")):(n=n.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),n=f(n,"string"))}return n+": "+s});a.pop();var E=0,S=w.reduce(function(e,t){return E++,t.indexOf("\n")>=0&&E++,e+t.length+1},0);return S>50?w=y[0]+(m===""?"":m+"\n ")+" "+w.join(",\n  ")+" "+y[1]:w=y[0]+m+" "+w.join(", ")+" "+y[1],w}var a=[],f=function(e,t){var n={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r={special:"cyan",number:"blue","boolean":"yellow","undefined":"grey","null":"bold",string:"green",date:"magenta",regexp:"red"}[t];return r?"["+n[r][0]+"m"+e+"["+n[r][1]+"m":e};return u||(f=function(e,t){return e}),h(e,typeof r=="undefined"?2:r)};var a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(e){},n.pump=null;var l=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},c=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.hasOwnProperty.call(e,n)&&t.push(n);return t},h=Object.create||function(e,t){var n;if(e===null)n={__proto__:null};else{if(typeof e!="object")throw new TypeError("typeof prototype["+typeof e+"] != 'object'");var r=function(){};r.prototype=e,n=new r,n.__proto__=e}return typeof t!="undefined"&&Object.defineProperties&&Object.defineProperties(n,t),n};n.inherits=function(e,t){e.super_=t,e.prototype=h(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})};var p=/%[sdj%]/g;n.format=function(e){if(typeof e!="string"){var t=[];for(var r=0;r<arguments.length;r++)t.push(n.inspect(arguments[r]));return t.join(" ")}var r=1,i=arguments,s=i.length,o=String(e).replace(p,function(e){if(e==="%%")return"%";if(r>=s)return e;switch(e){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":return JSON.stringify(i[r++]);default:return e}});for(var u=i[r];r<s;u=i[++r])u===null||typeof u!="object"?o+=" "+u:o+=" "+n.inspect(u);return o}},{events:15}],17:[function(e,t,n){var r=t.exports={};r.nextTick=function(){var e=typeof window!="undefined"&&window.setImmediate,t=typeof window!="undefined"&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",function(e){if(e.source===window&&e.data==="process-tick"){e.stopPropagation();if(n.length>0){var t=n.shift();t()}}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")}},{}]},{},[14]);